<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>상품 상세</title>
    <link th:href="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css}" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h2 th:text="${product.productName}">상품 이름</h2>
    <img th:src="${product.imageUrl}" class="img-fluid mb-3" alt="상품 이미지">
    <p th:text="${product.description}">상품 설명</p>
    <p>가격: <span th:text="${#numbers.formatDecimal(product.price, 0, 0)} + '원'"></span></p>
    <p>재고 수량: <span th:text="${product.stockQuantity}"></span></p>

    <form th:action="@{|/products/${product.id}/details/addToCart|}" method="post">
        <div class="form-group">
            <label for="quantity">수량</label>
            <input type="number" class="form-control" id="quantity" name="quantity" min="1" value="1" required>
        </div>
        <button type="submit" class="btn btn-primary mt-3">장바구니에 담기</button>
    </form>

    <!-- 수정 및 삭제 버튼 (관리자 권한만) -->
    <div sec:authorize="hasRole('ADMIN')" class="text-center mt-4">
        <div class="mt-4">
            <a th:href="@{|/admin/${product.id}/update|}" class="btn btn-warning">상품 수정</a>
        </div>
        <form th:action="@{|/admin/${product.id}/delete|}" method="post">
            <button type="submit" class="btn btn-danger" onclick="return confirm('정말 삭제하시겠습니까?')">상품 삭제</button>
        </form>
    </div>
</div>

<script th:src="@{https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js}"></script>
</body>
</html>